.\" Automatically generated from mdocxml
.Dd $Date: 2008/10/19 12:38:58 $
.Dt "MAKL(1)" 1
.Os UNIX
.Sh NAME
.Nm makl
.Nd A GNU make wrapper
.Sh SYNOPSIS
.Nm
.Op Fl -makl-verbose
.Op Fl -makl-tc=<toolchain>
.Op Fl -makl-tc-file=<file>
.Op Fl -makl-shlib=<shlib>
.Op Fl -makl-shlib-file=<file>
.Op Fl -makl-etc=<dir>
.Op Fl -makl-rc=<file>
.Op Fl -makl-gnumake=<prog>
.Op Fl -makl-gnumake-flags=<flags>
.Op Fl -makl-tc-onthefly
.Op Ar option ...
.Op Ar targets ...
.Sh OPTIONS
The available options are as follows:
.Bl -tag -width XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
.It Fl -makl-verbose
Let makl chat a bit more then usual.
.It Fl -makl-tc=<toolchain>
Tell makl to use this toolchain.
.It Fl -makl-tc-file=<file>
Tell makl to use the supplied file as toolchain.
.It Fl -makl-shlib=<shlib>
Tell makl to use this shared library build template.
.It Fl -makl-shlib-file=<file>
Tell makl to use the supplied file as shared library build template.
.It Fl -makl-etc=<dir>
Override default MAKL_ETC setting for this run.
.It Fl -makl-rc=<file>
Use file as further source for settings.
.It Fl -makl-gnumake=<prog>
Use prog instead of the default GNU make program.
.It Fl -makl-gnumake-flags=<flags>
Use flags instead of the default GNU make flags.
.It Fl -makl-tc-onthefly
Use the toolchain supplied via --makl-tc or --makl-tc-file for this makl run only.
.It Ar "option ..."
Any GNU make option.
.It Ar "targets ..."
Any defined target.
.El
.Sh DESCRIPTION
.Nm makl
is a GNU 
.Xr make 1 
wrapper which can be used, instead of plain 
.Nm make
to automatically bring into a C/C++ project the facilities provided by the MaKL build template library. 
.Sh ENVIRONMENT
.Nm makl
access the following environment variables: 
.Bl -tag -width XXXXX
.It MAKL_DIR
MaKL root directory which contains all the build templates, the autoconfiguration bourne shell functions, the ready-made toolchains, and any other bit used by 
.Nm makl
and friends.

.It MAKEFLAGS
This variable is used by GNU 
.Nm make
to pass default flags at each invocation.  MaKL uses it to feed 
.Nm make
the include path for its build templates' library, should you need to add other flags, feel free to push them here, or equivalently, use the --makl-gnumake-flags command line option.

.It MAKL_ETC
The directory containing the toolchain and shlib settings in use.  The default is in 
.Pa ${MAKL_DIR}/etc
, but its value can be changed on the fly to accomodate a toolchain different from the default.  See also the --makl-tc-onthefly argument.

.It MAKL_TC
Usually void, this variable tells which toolchain is to be used.  Take a look at 
.Pa ${MAKL_DIR}/tc
for a list of ready made toolchains.

.It MAKL_TC_FILE
This variable can be useful in case you have crafted your own toolchain and want to use it instead of the default.  Supply the full pathname of your .tc file here.

.It MAKL_SHLIB
Usually void, this variable tells which shared library build template is to be used.  Take a look at 
.Pa ${MAKL_DIR}/shlib
for a list of ready made shared library templates.

.It MAKL_SHLIB_FILE
This variable can be useful in case you have crafted your own shlib file and want to use it instead of the default.  Supply the full pathname of your 
.Pa shlib.mk
file here.

.It MAKL_RC_MAXDEPTH
Used to tell 
.Nm makl
the maximum depth at which a per-project 
.Pa makl.conf
must be searched starting from the directory in which 
.Nm makl
has been invoked.  If unset a default value of 5 is used.

.El
.Sh FILES
.Bl -tag -width indent
.It Pa $HOME/.maklrc
Per-user makl settings' file.
.It Pa makl.conf
Per-project makl settings' file
.El
.Sh EXAMPLES
Do the default target with extra chat bits on: 
.Bd -literal

    $ makl --makl-verbose

.Ed
Use an one-shot Linux ARM toolchain to execute the build (plus the depend step) into an ad-hoc target directory: 
.Bd -literal

    $ makl --makl-tc=linux-arm --makl-tc-onthefly OBJDIR=arm depend all

.Ed
.Sh DIAGNOSTICS
In case of error (be it a 
.Nm makl
error or a 
.Nm make
errror), 
.Nm makl
will bail out with non-zero exit code and appropriate diagnostic message on standard output. 
.Sh SEE ALSO
.Xr make 1 , 
.Xr gnumake 1 
.Xr makl-conf 1 
.Xr makl-tc 1 
.Xr makl-new 1 
.Sh BUGS
If you catch a bug, please drop a note to makl-users@koanlogic.com.
.Pp
