# makl_compile c_file c_flags
#
#   Compile c_file with the supplied c_flags
#   $1 - Pathname of the C file to be compiled 
#   $2 - CFLAGS string to be passed to the compiler
#   Return '0' on success, '1' on failure.
#
makl_compile ()
{
    if [ ! "$1" ]; then
        makl_err 1 "makl_compile called with no arguments"
    fi
   
    makl_dbg "compiling $1 in ${makl_run_dir} with flags '$2'"

    (
        cp $1 ${makl_run_dir}
        cd ${makl_run_dir}

        # XXX C Compiler name should be read from toolchain.mk
        eval cc $2 $1 
    )

    [ $? -ne 0 ] && return 1

    return 0
}
